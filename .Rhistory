"Stock de TV al cuadrado"
),
title = "Impacto de la cobertura de Globo por rango de edad",
omit.stat = c("f"),
out = "tablas/tabla_edades_felm.tex"
)
)
# Quitar comentarios de stargazer
tabla_2 <- tabla_2[!grepl("^%", tabla_2)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_2, sep = "\n")
#Segmentación de intervalos
data_final$edu_group <- cut(
data_final$yrs_edu,
breaks = c(0, 5, 10, 15, max(data_final$yrs_edu, na.rm = TRUE)),
include.lowest = TRUE,
right = FALSE,
labels = c("0-4", "5-9", "10-14", "15+")
)
# Se escoge los años de educación de la mujer para estimar el modelo con interacción
m_hetero_felm <- felm(
B ~ globocoverage1 * edu_group + age + agesq + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = data_final,
weights = data_final$weight
)
# Exportar resultados con Stargazer
tabla_3 <- capture.output(stargazer(
m_hetero_felm,
type = "latex",
title = "Efectos heterogéneos de Globo por nivel educativo",
covariate.labels = c(
"Cobertura Globo",
"Globo × Educación 5–9",
"Globo × Educación 10–14",
"Globo × Educación 15+",
"Edad",
"Edad al cuadrado",
"Años de educación (jefe de hogar)",
"Riqueza (sin TV)",
"Católica",
"Rural",
"Doctores per cápita",
"Ingreso per cápita (IPC renta)",
"Stock de TV",
"Stock de TV al cuadrado"
),
dep.var.labels = "Nacimientos",
out = "tablas/efectos_globo_grupos.tex"
))
# Quitar comentarios de stargazer
tabla_3 <- tabla_3[!grepl("^%", tabla_3)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_3, sep = "\n")
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE
)
knitr::opts_knit$set(root.dir = "C:/Users/mc-c2/OneDrive - Universidad de los andes/Universidad/MECA/Repositorios/Repositorio/Taller4-DifinDif")
tinytex::tlmgr_update(self = TRUE, all = TRUE)
if (!requireNamespace("tinytex", quietly = TRUE)) {
install.packages("tinytex")
}
# Verificar si TinyTeX está instalado
if (tinytex::is_tinytex()) {
message("TinyTeX detectado. Actualizando instalación...")
# Actualizar gestor de paquetes (self) y todos los paquetes
tinytex::tlmgr_update(self = TRUE, all = TRUE)
message("✅ TinyTeX actualizado correctamente.")
} else {
message("No se detecta TinyTeX. Si usas MikTeX o TeX Live, actualiza manualmente.")
}
# Cargar liberias y paquetes
# Instalando pacman si se requiere
if (!require("pacman")) install.packages("pacman")
# Cargando los paquetes usando pacman
pacman::p_load(
# A) Manipulación, limpieza y visualización de datos
tidyverse,    # Colección de paquetes esenciales (incluye dplyr, ggplot2, etc.)
dplyr,        # Manipulación de datos (ya incluido en tidyverse, pero lo dejamos explícito).
ggplot2,      # Visualización de datos (incluido en tidyverse).
scales,       # Manejo de escalas (ej. porcentajes, comas).
skimr,        # Resúmenes estadísticos rápidos de data.frames.
# B) Modelado y análisis estadístico/econométrico
fixest,       # Modelos de efectos fijos de alto rendimiento.
plm,          # Modelos para datos de panel.
AER,          # Herramientas de econometría aplicada.
lmtest,       # Pruebas de hipótesis para modelos de regresión.
sandwich,     # Errores estándar robustos.
survey,       # Análisis de encuestas complejas.
# C) Importación, exportación y generación de reportes
haven,        # Lectura/escritura de Stata, SAS, SPSS.
stargazer,    # Tablas de regresión con formato publicable.
knitr,        # Reportes dinámicos en RMarkdown.
modelsummary, # Tablas y resúmenes comparativos de modelos.
tinytex       # Soporte para compilar a PDF con LaTeX en RMarkdown.
)
library(lfe)
# Leer archivo .dta
data <- read_dta("SoapOperas2.dta")
# Establecemos la semilla de replicabilidad
set.seed(201613424)
n <- nrow(data) #Definir el tamaño de la base
# Seleccionar el 5% al azar y eliminarlo de la base
elim <- sample(1:n, size = round(0.05 * n))
# Redefinir la base sin lo seleccionado
data_trim <- data[-elim, ]
# Restringir la nueva base al percentil 95
p95 <- quantile(data_trim$geoarea80, probs = 0.95, na.rm = TRUE)
data_final <- subset(data_trim, geoarea80 <= p95)
# Modelo 1: sin controles, efectos fijos de tiempo
m1_felm <- felm(B ~ globocoverage1 | year | 0 | amc_code,
data = data_final, weights = data_final$weight)
# Modelo 2: efectos fijos de área y tiempo
m2_felm <- felm(B ~ globocoverage1 | amc_code + year | 0 | amc_code,
data = data_final, weights = data_final$weight)
# Modelo 3: con controles + efectos fijos de área y tiempo
m3_felm <- felm(B ~ globocoverage1 + age + agesq + yrs_edu + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = data_final, weights = data_final$weight)
# Exportar con stargazer
tabla_1 <- capture.output(
stargazer(m1_felm, m2_felm, m3_felm,
type = "latex",
dep.var.labels = "Nacimientos",
column.labels = c("Modelo 1", "Modelo 2", "Modelo 3"),
covariate.labels = c(
"Cobertura Globo",
"Edad",
"Edad al cuadrado",
"Años de educación (mujer)",
"Años de educación (jefe de hogar)",
"Riqueza (sin TV)",
"Católica",
"Rural",
"Doctores per cápita",
"Ingreso per cápita (IPC renta)",
"Stock de TV",
"Stock de TV al cuadrado"
),
title = "Impacto de la cobertura de Globo sobre la fertilidad",
label = "tab:globo_fertilidad",
out = "tablas/modelos_globo.tex")
)
# Quitar comentarios de stargazer
tabla_1 <- tabla_1[!grepl("^%", tabla_1)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_1, sep = "\n")
# Modelo 1: Mujeres 15–24 años
m1_age_felm <- felm(
B ~ globocoverage1 + age + agesq + yrs_edu + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = subset(data_final, age >= 15 & age <= 24),
weights = subset(data_final, age >= 15 & age <= 24)$weight
)
# Modelo 2: Mujeres 25–34 años
m2_age_felm <- felm(
B ~ globocoverage1 + age + agesq + yrs_edu + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = subset(data_final, age >= 25 & age <= 34),
weights = subset(data_final, age >= 25 & age <= 34)$weight
)
# Modelo 3: Mujeres 35–44 años
m3_age_felm <- felm(
B ~ globocoverage1 + age + agesq + yrs_edu + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = subset(data_final, age >= 35 & age <= 44),
weights = subset(data_final, age >= 35 & age <= 44)$weight
)
# Tabla con Stargazer
tabla_2 <- capture.output (
stargazer(
m1_age_felm, m2_age_felm, m3_age_felm,
type = "latex",
dep.var.labels = "Nacimientos",
column.labels = c("15–24 años", "25–34 años", "35–44 años"),
covariate.labels = c(
"Cobertura Globo",
"Edad",
"Edad al cuadrado",
"Años de educación (mujer)",
"Años de educación (jefe de hogar)",
"Riqueza (sin TV)",
"Católica",
"Rural",
"Doctores per cápita",
"Ingreso per cápita (IPC renta)",
"Stock de TV",
"Stock de TV al cuadrado"
),
title = "Impacto de la cobertura de Globo por rango de edad",
omit.stat = c("f"),
out = "tablas/tabla_edades_felm.tex"
)
)
# Quitar comentarios de stargazer
tabla_2 <- tabla_2[!grepl("^%", tabla_2)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_2, sep = "\n")
#Segmentación de intervalos
data_final$edu_group <- cut(
data_final$yrs_edu,
breaks = c(0, 5, 10, 15, max(data_final$yrs_edu, na.rm = TRUE)),
include.lowest = TRUE,
right = FALSE,
labels = c("0-4", "5-9", "10-14", "15+")
)
# Se escoge los años de educación de la mujer para estimar el modelo con interacción
m_hetero_felm <- felm(
B ~ globocoverage1 * edu_group + age + agesq + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = data_final,
weights = data_final$weight
)
# Exportar resultados con Stargazer
tabla_3 <- capture.output(stargazer(
m_hetero_felm,
type = "latex",
title = "Efectos heterogéneos de Globo por nivel educativo",
covariate.labels = c(
"Cobertura Globo",
"Globo × Educación 5–9",
"Globo × Educación 10–14",
"Globo × Educación 15+",
"Edad",
"Edad al cuadrado",
"Años de educación (jefe de hogar)",
"Riqueza (sin TV)",
"Católica",
"Rural",
"Doctores per cápita",
"Ingreso per cápita (IPC renta)",
"Stock de TV",
"Stock de TV al cuadrado"
),
dep.var.labels = "Nacimientos",
out = "tablas/efectos_globo_grupos.tex"
))
# Quitar comentarios de stargazer
tabla_3 <- tabla_3[!grepl("^%", tabla_3)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_3, sep = "\n")
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE
)
knitr::opts_knit$set(root.dir = "C:/Users/mc-c2/OneDrive - Universidad de los andes/Universidad/MECA/Repositorios/Repositorio/Taller4-DifinDif")
tinytex::tlmgr_update(self = TRUE, all = TRUE)
if (!requireNamespace("tinytex", quietly = TRUE)) {
install.packages("tinytex")
}
# Verificar si TinyTeX está instalado
if (tinytex::is_tinytex()) {
message("TinyTeX detectado. Actualizando instalación...")
# Actualizar gestor de paquetes (self) y todos los paquetes
tinytex::tlmgr_update(self = TRUE, all = TRUE)
message("✅ TinyTeX actualizado correctamente.")
} else {
message("No se detecta TinyTeX. Si usas MikTeX o TeX Live, actualiza manualmente.")
}
# Cargar liberias y paquetes
# Instalando pacman si se requiere
if (!require("pacman")) install.packages("pacman")
# Cargando los paquetes usando pacman
pacman::p_load(
# A) Manipulación, limpieza y visualización de datos
tidyverse,    # Colección de paquetes esenciales (incluye dplyr, ggplot2, etc.)
dplyr,        # Manipulación de datos (ya incluido en tidyverse, pero lo dejamos explícito).
ggplot2,      # Visualización de datos (incluido en tidyverse).
scales,       # Manejo de escalas (ej. porcentajes, comas).
skimr,        # Resúmenes estadísticos rápidos de data.frames.
# B) Modelado y análisis estadístico/econométrico
fixest,       # Modelos de efectos fijos de alto rendimiento.
plm,          # Modelos para datos de panel.
AER,          # Herramientas de econometría aplicada.
lmtest,       # Pruebas de hipótesis para modelos de regresión.
sandwich,     # Errores estándar robustos.
survey,       # Análisis de encuestas complejas.
# C) Importación, exportación y generación de reportes
haven,        # Lectura/escritura de Stata, SAS, SPSS.
stargazer,    # Tablas de regresión con formato publicable.
knitr,        # Reportes dinámicos en RMarkdown.
modelsummary, # Tablas y resúmenes comparativos de modelos.
tinytex       # Soporte para compilar a PDF con LaTeX en RMarkdown.
)
library(lfe)
# Leer archivo .dta
data <- read_dta("SoapOperas2.dta")
# Establecemos la semilla de replicabilidad
set.seed(201613424)
n <- nrow(data) #Definir el tamaño de la base
# Seleccionar el 5% al azar y eliminarlo de la base
elim <- sample(1:n, size = round(0.05 * n))
# Redefinir la base sin lo seleccionado
data_trim <- data[-elim, ]
# Restringir la nueva base al percentil 95
p95 <- quantile(data_trim$geoarea80, probs = 0.95, na.rm = TRUE)
data_final <- subset(data_trim, geoarea80 <= p95)
# Modelo 1: sin controles, efectos fijos de tiempo
m1_felm <- felm(B ~ globocoverage1 | year | 0 | amc_code,
data = data_final, weights = data_final$weight)
# Modelo 2: efectos fijos de área y tiempo
m2_felm <- felm(B ~ globocoverage1 | amc_code + year | 0 | amc_code,
data = data_final, weights = data_final$weight)
# Modelo 3: con controles + efectos fijos de área y tiempo
m3_felm <- felm(B ~ globocoverage1 + age + agesq + yrs_edu + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = data_final, weights = data_final$weight)
# Exportar con stargazer
tabla_1 <- capture.output(
stargazer(m1_felm, m2_felm, m3_felm,
type = "latex",
dep.var.labels = "Nacimientos",
column.labels = c("Modelo 1", "Modelo 2", "Modelo 3"),
covariate.labels = c(
"Cobertura Globo",
"Edad",
"Edad al cuadrado",
"Años de educación (mujer)",
"Años de educación (jefe de hogar)",
"Riqueza (sin TV)",
"Católica",
"Rural",
"Doctores per cápita",
"Ingreso per cápita (IPC renta)",
"Stock de TV",
"Stock de TV al cuadrado"
),
title = "Impacto de la cobertura de Globo sobre la fertilidad",
label = "tab:globo_fertilidad",
out = "tablas/modelos_globo.tex")
)
# Quitar comentarios de stargazer
tabla_1 <- tabla_1[!grepl("^%", tabla_1)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_1, sep = "\n")
# Modelo 1: Mujeres 15–24 años
m1_age_felm <- felm(
B ~ globocoverage1 + age + agesq + yrs_edu + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = subset(data_final, age >= 15 & age <= 24),
weights = subset(data_final, age >= 15 & age <= 24)$weight
)
# Modelo 2: Mujeres 25–34 años
m2_age_felm <- felm(
B ~ globocoverage1 + age + agesq + yrs_edu + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = subset(data_final, age >= 25 & age <= 34),
weights = subset(data_final, age >= 25 & age <= 34)$weight
)
# Modelo 3: Mujeres 35–44 años
m3_age_felm <- felm(
B ~ globocoverage1 + age + agesq + yrs_edu + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = subset(data_final, age >= 35 & age <= 44),
weights = subset(data_final, age >= 35 & age <= 44)$weight
)
# Tabla con Stargazer
tabla_2 <- capture.output (
stargazer(
m1_age_felm, m2_age_felm, m3_age_felm,
type = "latex",
dep.var.labels = "Nacimientos",
column.labels = c("15–24 años", "25–34 años", "35–44 años"),
covariate.labels = c(
"Cobertura Globo",
"Edad",
"Edad al cuadrado",
"Años de educación (mujer)",
"Años de educación (jefe de hogar)",
"Riqueza (sin TV)",
"Católica",
"Rural",
"Doctores per cápita",
"Ingreso per cápita (IPC renta)",
"Stock de TV",
"Stock de TV al cuadrado"
),
title = "Impacto de la cobertura de Globo por rango de edad",
omit.stat = c("f"),
out = "tablas/tabla_edades_felm.tex"
)
)
# Quitar comentarios de stargazer
tabla_2 <- tabla_2[!grepl("^%", tabla_2)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_2, sep = "\n")
#Segmentación de intervalos
data_final$edu_group <- cut(
data_final$yrs_edu,
breaks = c(0, 5, 10, 15, max(data_final$yrs_edu, na.rm = TRUE)),
include.lowest = TRUE,
right = FALSE,
labels = c("0-4", "5-9", "10-14", "15+")
)
# Se escoge los años de educación de la mujer para estimar el modelo con interacción
m_hetero_felm <- felm(
B ~ globocoverage1 * edu_group + age + agesq + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = data_final,
weights = data_final$weight
)
# Exportar resultados con Stargazer
tabla_3 <- capture.output(stargazer(
m_hetero_felm,
type = "latex",
title = "Efectos heterogéneos de Globo por nivel educativo",
covariate.labels = c(
"Cobertura Globo",
"Globo × Educación 5–9",
"Globo × Educación 10–14",
"Globo × Educación 15+",
"Edad",
"Edad al cuadrado",
"Años de educación (jefe de hogar)",
"Riqueza (sin TV)",
"Católica",
"Rural",
"Doctores per cápita",
"Ingreso per cápita (IPC renta)",
"Stock de TV",
"Stock de TV al cuadrado"
),
dep.var.labels = "Nacimientos",
out = "tablas/efectos_globo_grupos.tex"
))
# Quitar comentarios de stargazer
tabla_3 <- tabla_3[!grepl("^%", tabla_3)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_3, sep = "\n")
#Segmentación de intervalos
data_final$edu_group <- cut(
data_final$yrs_edu,
breaks = c(0, 5, 10, 15, max(data_final$yrs_edu, na.rm = TRUE)),
include.lowest = TRUE,
right = FALSE,
labels = c("0-4", "5-9", "10-14", "15+")
)
# Se escoge los años de educación de la mujer para estimar el modelo con interacción
m_hetero_felm <- felm(
B ~ globocoverage1 * edu_group + age + agesq + yrsedu_head +
wealth_noTV + catholic + rural + Doctors + ipc_renta + stock + stocksq |
amc_code + year | 0 | amc_code,
data = data_final,
weights = data_final$weight
)
# Exportar resultados con Stargazer
tabla_3 <- capture.output(stargazer(
m_hetero_felm,
type = "latex",
title = "Efectos heterogéneos de Globo por nivel educativo",
covariate.labels = c(
"Cobertura Globo",
"Globo × Educación 5–9",
"Globo × Educación 10–14",
"Globo × Educación 15+",
"Edad",
"Edad al cuadrado",
"Años de educación (jefe de hogar)",
"Riqueza (sin TV)",
"Católica",
"Rural",
"Doctores per cápita",
"Ingreso per cápita (IPC renta)",
"Stock de TV",
"Stock de TV al cuadrado"
),
dep.var.labels = "Nacimientos",
out = "tablas/efectos_globo_grupos.tex"
))
# Quitar comentarios de stargazer
tabla_3 <- tabla_3[!grepl("^%", tabla_3)]
# Imprimir directamente para que LaTeX lo compile
cat(tabla_3, sep = "\n")
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE
)
knitr::opts_knit$set(root.dir = "C:\1. MECA\2025\EVALUACIACÓN DE IMPACTO- Raachid Raaj\Taller 4- Diiff and Diif\Taller4-DifinDif")
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE
)
knitr::opts_knit$set(root.dir = "C:/1. MECA/2025/EVALUACIACÓN DE IMPACTO- Raachid Raaj/Taller 4- Diiff and Diif/Taller4-DifinDif")
tinytex::tlmgr_update(self = TRUE, all = TRUE)
if (!requireNamespace("tinytex", quietly = TRUE)) {
install.packages("tinytex")
}
# Verificar si TinyTeX está instalado
if (tinytex::is_tinytex()) {
message("TinyTeX detectado. Actualizando instalación...")
# Actualizar gestor de paquetes (self) y todos los paquetes
tinytex::tlmgr_update(self = TRUE, all = TRUE)
message("✅ TinyTeX actualizado correctamente.")
} else {
message("No se detecta TinyTeX. Si usas MikTeX o TeX Live, actualiza manualmente.")
}
